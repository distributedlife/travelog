{% capture root_url %}
{{ site.root | strip_slash }}
{% endcapture %}

<!doctype html>
<html lang="en">

{% include head.html %}
<body class="wrapper">
<div id="lightbox"></div>
{% include paginate.html %}
<div class="container">
    {{ content }}
</div>
<div id="bottom-pages">
    {% include paginate.html %}
</div>
</body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
if (typeof jQuery == 'undefined') {
    document.write(unescape("%3Cscript src='assets/js/jquery-1.8.2.min.js' type='text/javascript'%3E%3C/script%3E"));
}
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-41328116-1', 'thoughtworks.github.io');
ga('send', 'pageview');
</script>
<script>
$(function() {
    setTimeout(function() {
        $("<span>&nbsp;</span>").appendTo(".cover");
    }, 100);
});
</script>
<script>
$(document).ready(function (){
	$(window).scroll(function () {
		$("img").each(function() {
			$(this).css({transform: 'translate(0px, 0px) scale(1)'});

			if ($("#lightbox").is(':visible')) {
				$("#lightbox").hide();
			}

			$(this).css('z-index', 998);;
		});
	});

	$("img").on('click', function(e) {
		var selected_image = this;

		var padding = 50;
		var window_height = $(window).height();
		var image_height = $(this).height();
		
		var image_offset = $(this).offset();
		var window_scroll_top = $(window).scrollTop();

		
		var new_height = window_height - (padding * 2);
		var scale = new_height / image_height;
		
		var image_wrt_window_top = image_offset.top - window_scroll_top;
		var margin = (window_height - image_height) / 2;
		var new_top = margin - image_wrt_window_top;

		if ($("#lightbox").is(':visible')) {
			$("#lightbox").hide();
			$(selected_image).css({transform: 'translate(0px, 0px) scale(1)', 'z-index': 998});

			$("img").each(function() {
				if (selected_image !== this) {
					$(this).css('z-index', 998);;
				}
			});
		} else {
			$("#lightbox").show();
			$(selected_image).css({transform: 'translate(0px,' + new_top + 'px) scale(' + scale + ')', 'z-index': 1000});

			$("img").each(function() {
				if (selected_image !== this) {
					$(this).css('z-index', 998);;
				}
			});
		}
		
		e.preventDefault();
	});
});
</script>
</html>
